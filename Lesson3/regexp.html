<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    // Cинтаксис 1
    // let regexp = new RegExp('Регулярное выражение', 'Флаг');

    // Синтаксис 2
    // let regexp = /регвыражение/флаг;

    // Флаги
    // i - без учета регистра
    // g - поиск глобально по строке
    // m - многострочный поиск

    let str = "Язык JavaScript называется так из-за популярности языка Java";
    let regExp = new RegExp('java', 'ig');

    // search
    // возвращает индекс первого вхождения
    // -1 - вхождение не найдено
    // не чувствителен к флагу g
    console.log(str.search(regExp));

    //match
    console.log(str.match(/java/i));
    console.log(str.match(/java/ig));

    //Замена

    console.log('+7 (000)000-00-00'.replace('-', ':'));
    console.log('+7 (000)000-00-00'.replace(/-/, ':'));
    console.log('+7 (000)000-00-00'.replace(/-/g, ':'));

    let name = 'Doe, John Alex';
    console.log(name.replace(/([a-z]+), ([a-z]+)/i, '$2 $1'));
    console.log(name.replace(/([a-z]+), ([a-z]+)/i, 'Hello, $2'));
    console.log(name.replace(/([a-z]+), ([a-z]+)/i, 'Hello, $&'));

    //Классы
    // \d - [0123456789] - [0-9] - все цифры
    // \s - space, tab, \n
    // \w - [a-z0-9_]
    // [а-яА-ЯЁё] - кирриллица
    // \b - граница слова
    // \D - все кроме цифр - [^0-9]
    // \S - все символы кроме пробелов
    // \W - все кроме набора [a-z0-9_]
    // \B

    // КВАНТИФИКАТОРЫ
    // {m} - число повторений символа строго m раз
    // {m, n} - число повторений от m до n
    // {m, } - минимальное число повторений от m раз ( до бесконечности )
    // { , m} - максим повторений m раз (от 0 раз)
    // Сокращения
    // + - {1, }
    // * - {0, }
    // ? - {0, 1}


    console.log('+7 (000)000-00-00'.match(/\d/g));
    console.log('+7 (000)000-00-00'.match(/\d+/g));
    console.log('+7 (000)000-00-00'.match(/\d+/g).join(''));

    console.log('color colour'.match(/colou?r/g));
    console.log('color colour colotr'.match(/colo[ut]?r/g));

    console.log('Язык Java'.match(/\bjava\b/i));
    console.log('Язык JavaScript'.match(/\bjava\b/i));

    console.log('Chapter 4.2'.match(/\d\.\d/i));
    console.log('Chapter 4d2'.match(/\d\.\d/i));


    // Методы регулярных выражений

    //test

    console.log(/java/.test(str));
    console.log(/java/i.test(str));

    //exec
    //строго зависим от g

    // console.log(/java/i.exec(str));

    // c флагом g

    let result;
    let regExp1 = /java/ig;

    console.log('Начальный lastIndex', regExp1.lastIndex);

    while (result = regExp1.exec(str)){
        console.log(result);
        console.log('Текущий lastIndex', regExp1.lastIndex);
        console.log(`Найдено ${result[0]} на позиции ${result.index}`);
    }

    console.log('Конечный lastIndex', regExp1.lastIndex);

</script>
</body>
</html>